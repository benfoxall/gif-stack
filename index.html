<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>gif stack</title>
    <style media="screen">
      /*canvas { width: 100%; height: 100%}*/
      body {margin:0}
    </style>
  </head>
  <body>
    <img src="example.gif" />

    <script src="components/libgif-js/libgif.js"></script>
    <script src="components/three.js/three.min.js"></script>
    <script type="text/javascript">

      var sg = new SuperGif({ gif: document.querySelector('img') } );

      sg.load(function(img){

        sg.pause();
        sg.get_canvas().remove()

        var width = img.naturalWidth,
            height = img.naturalHeight;

        var objects = sg.frames()
            .map(function(f){
                var t = new THREE.Texture( f.data );
                t.minFilter = THREE.NearestFilter;
                t.needsUpdate = true;
                t.transparent = true;

                var geometry = new THREE.PlaneGeometry(width, height, 1, 1)

                var material = new THREE.MeshBasicMaterial( {
                  color: 0xffffff, side: THREE.DoubleSide,
                  map: t,
                  transparent: true
                });

                return new THREE.Mesh( geometry, material );
            })


        var scene = new THREE.Scene();
        var group = new THREE.Object3D();
        group.add.apply(group, objects);


        var scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera( 50, width / height, 0.1, 10000 )
        //   var camera = new THREE.OrthographicCamera( -1, 1, -1, 1, 1, 5 )
        var renderer = new THREE.WebGLRenderer({alpha: true});
        renderer.setSize( width, height );
        document.body.appendChild( renderer.domElement )


        scene.add(group)
        camera.position.z = width;//2;//5;


        function render(time) {
          requestAnimationFrame( render );
          renderer.render( scene, camera );

          group.rotation.x = my/200;
          group.rotation.y = mx/200;

          var t = (time/1000)%1;

          for (var i = 0; i < group.children.length; i++) {
            group.children[i].position.z = (i * 5 * (zoom/15)) + 1 - (zoom*10);


            group.children[i].material.opacity = t > (i/group.children.length)  ? 1 : 0;//.3;

          }

        }
        render();

      });


    var mx = 0, my = 0, zoom = 0;

    document.addEventListener('mousemove', function(e){
        if(!e.which) return
      mx = e.x - (window.innerWidth/2);
      my = e.y - (window.innerHeight/2);
      zoom = Math.sqrt((my*my) + (mx*mx))
    }, false)


    </script>
  </body>
</html>
